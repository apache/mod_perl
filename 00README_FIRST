a (nearly) complete rewrite is underway for mod_perl-2.0

the module is not usable yet, at least not the way 1.xx is

what you see here is just a start on the new build/glue infrastructure

more detailed design docs, etc. will follow along with updates here
and on the list

if you want to try building with an interpreter pool, you'll need Perl
5.6.0 with patches/perl_no_get_context.pat applied and Perl built like 
so:

% ./Configure -des -Dusethreads

mod_perl-2.0 will still work with an out-of-the-box Perl, but will
only be useful if your mpm is prefork (which is much like 1.3.x)

to build mod_perl static:

% perl Makefile.PL && make libmodperl.a

% cd ../apache-2.0/src
% ./configure --prefix=$HOME/apache-2.0 --with-mpm=mpmt_pthread
% patch -p1 < ../modperl-2.0/patches/link-hack.pat
% make

to build mod_perl dynamic:

% perl Makefile.PL && make libmodperl.so

(note the dso-link-hack.pat is need for my suse-6.1, might be
different for your platform)

% cd ../apache-2.0/src
% ./configure --prefix=$HOME/apache-2.0 --with-mpm=mpmt_pthread
% patch -p1 < ../modperl-2.0/patches/dso-link-hack.pat
% make

as for httpd.conf, mine looks something like so at the moment:

#same as using the MOD_PERL_TRACE environment variable

#if dynamic build
LoadModule perl_module libexec/libmodperl.so

PerlTrace all

#only with -Dusethreads
PerlInterpStart 3
PerlInterpMax 4

#PerlRequire/PerlModule/etc will return, in the meantime, this
#directive passes arbitrary command line switches to perl

PerlSwitches -T /home/dougm/test/startup.pl

it is possible to configure Perl*Handlers, but there is not yet an
interface back into Apache, e.g.

PerlLogHandler MyLog::handler

sub MyLog::handler {
    warn "hey, it works!";
}

--dougm 04/21
